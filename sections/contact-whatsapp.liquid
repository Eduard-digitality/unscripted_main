{% schema %}
{
  "name": "WhatsApp Overlay Button",
  "settings": [
    {
      "type": "image_picker",
      "id": "whatsapp_icon",
      "label": "WhatsApp Icon Image"
    },
    {
      "type": "text",
      "id": "whatsapp_number",
      "label": "WhatsApp Number (with country code, no + or spaces)",
      "default": "1234567890"
    }
  ],
  "presets": [
    {
      "name": "WhatsApp Overlay Button",
      "category": "Custom"
    }
  ]
}
{% endschema %}

<style>
  #whatsapp-overlay {
    position: fixed;
    right: 20px;
    bottom: 5%;
    transform: translateY(-50%);
    z-index: 9999;
    cursor: pointer;
    display: flex;
    align-items: center;
    background: #DD3F21;
    border-radius: 50px;
    padding: 10px 14px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    transition: background 0.3s ease;
    width: 60px;
    height: 60px;
  }
  #whatsapp-overlay:hover {
    background: #dd3f21a3;
  }
  #whatsapp-overlay img {
    max-width: 32px;
    max-height: 32px;
    margin-right: 8px;
  }
  #whatsapp-overlay .tooltip-text {
    color: white;
    font-weight: 600;
    font-size: 14px;
    white-space: nowrap;
  }
</style>

{% if section.settings.whatsapp_number %}
  <a
    id="whatsapp-overlay"
    href="https://wa.me/{{ section.settings.whatsapp_number }}"
    target="_blank"
    rel="noopener noreferrer"
    title="{{ section.settings.tooltip_text }}"
  >
    {% if section.settings.whatsapp_icon %}
      <img src="{{ section.settings.whatsapp_icon | img_url: '64x64' }}" alt="WhatsApp">
    {% else %}
      <!-- Default WhatsApp SVG icon if no image chosen -->
      <svg style="width:32px;height:32px;fill:#fff;" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M20.52 3.48A11.65 11.65 0 0012 0C5.37 0 .05 5.37.05 12a11.7 11.7 0 002.05 6.44L0 24l5.76-1.91a11.65 11.65 0 006.24 1.73h.01c6.63 0 12-5.37 12-12a11.7 11.7 0 00-3.49-8.34zm-8.3 17.12a9.52 9.52 0 01-4.84-1.39l-.34-.2-3.6 1.19 1.22-3.51-.22-.35a9.5 9.5 0 116.78 4.26zm5.3-6.64c-.29-.14-1.73-.86-2-.96-.27-.11-.46-.14-.65.14-.19.27-.74.96-.9 1.16-.17.19-.34.21-.63.07-.29-.14-1.22-.45-2.32-1.44-.86-.77-1.44-1.72-1.61-2.01-.17-.29-.02-.45.13-.59.14-.15.29-.34.44-.51.15-.17.19-.29.29-.48.1-.19.05-.35-.02-.49-.07-.14-.65-1.57-.89-2.16-.24-.57-.48-.49-.65-.5-.17-.01-.36-.01-.55-.01-.19 0-.49.07-.75.35-.26.28-1 1-1 2.46 0 1.46 1.03 2.88 1.17 3.08.14.2 2.01 3.07 4.86 4.3.68.29 1.21.46 1.62.59.68.22 1.3.19 1.79.12.55-.08 1.73-.7 1.97-1.37.24-.67.24-1.24.17-1.37-.07-.14-.27-.22-.56-.36z"/>
      </svg>
    {% endif %}
  </a>
{% endif %}
